<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4"
	layout:decorator="layouts/dashboardLayout" lang="en-us">

<head>
<title>Builder Wizard</title>
</head>

<!-- NOTE THESE ARE DELIBERATLY NOT INSIDE THE <HEAD> SECTION AS IT CAUSES MERGING ISSUES WITH THYMELEAF -->
<!-- #CSS Links -->
<!-- Basic Styles -->
<link rel="stylesheet" type="text/css" media="screen"
	href="../../../css/bootstrap.min.css"
	th:href="@{/css/bootstrap.min.css}">
<link rel="stylesheet" type="text/css" media="screen"
	href="../../../css/font-awesome.min.css"
	th:href="@{/css/font-awesome.min.css}">

<!-- SmartAdmin Styles : Caution! DO NOT change the order -->
<link rel="stylesheet" type="text/css" media="screen"
	href="../../../css/smartadmin-production-plugins.min.css"
	th:href="@{/css/smartadmin-production-plugins.min.css}">
<link rel="stylesheet" type="text/css" media="screen"
	href="../../../css/smartadmin-production.min.css"
	th:href="@{/css/smartadmin-production.min.css}">
<link rel="stylesheet" type="text/css" media="screen"
	href="../../../css/smartadmin-skins.min.css"
	th:href="@{/css/smartadmin-skins.min.css}">

<!-- SmartAdmin RTL Support -->
<link rel="stylesheet" type="text/css" media="screen"
	href="../../../css/smartadmin-rtl.min.css"
	th:href="@{/css/smartadmin-rtl.min.css}">

<!-- #FAVICONS -->
<link rel="shortcut icon" href="../../../img/favicon/favicon.ico"
	th:href="@{/img/favicon/favicon.ico}" type="image/x-icon">
<link rel="icon" href="../../../img/favicon/favicon.ico"
	th:href="@{/img/favicon/favicon.ico}" type="image/x-icon">

<!-- #GOOGLE FONT -->
<link rel="stylesheet"
	href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,300,400,700">

<body>
	<div layout:fragment="content">

		<!-- widget grid -->
		<section id="widget-grid" class="">

			<!-- row -->
			<div class="row">

				<!-- NEW WIDGET START -->
				<article class="col-sm-12 col-md-12 col-lg-12">

					<!-- Widget ID (each widget will need unique ID)-->
					<div class="jarviswidget jarviswidget-color-darken" id="wid-id-0"
						data-widget-editbutton="false" data-widget-deletebutton="false">

						<header>
							<span class="widget-icon"> <i class="fa fa-check"></i>
							</span>
							<h2>OVS Plan Builder</h2>

						</header>

						<!-- widget div-->
						<div>

							<!-- widget edit box -->
							<div class="jarviswidget-editbox">
								<!-- This area used as dropdown edit box -->

							</div>
							<!-- end widget edit box -->

							<!-- widget content -->
							<div class="widget-body">

								<div class="row">
									<form id="wizard-1" novalidate="novalidate" action="#"
										th:action="@{|/builder/result/project/${projectId}|}"
										th:object="${gizmo}" method="post">
										<div id="bootstrap-wizard-1" class="col-sm-12">
											<div class="form-bootstrapWizard">
												<ul class="bootstrapWizard form-wizard">
													<li class="active" data-target="#step1"><a
														href="#tab1" data-toggle="tab"> <span class="step">1</span>
															<span class="title">Plan information</span>
													</a></li>
													<li data-target="#step2"><a href="#tab2"
														data-toggle="tab"> <span class="step">2</span> <span
															class="title">Financial information</span>
													</a></li>
													<li data-target="#step3"><a href="#tab3"
														data-toggle="tab"> <span class="step">3</span> <span
															class="title">Mineral Details</span>
													</a></li>
													<li data-target="#step4"><a href="#tab4"
														data-toggle="tab"> <span class="step">4</span> <span
															class="title">Risk Profile</span>
													</a></li>
												</ul>
												<div class="clearfix"></div>
											</div>
											<div class="tab-content">
												<div class="tab-pane active" id="tab1">
													<br>
													<h3>
														<strong>Step 1 </strong> - Plan Information
													</h3>

												</div>
												<div class="tab-pane" id="tab2">
													<br>
													<h3>
														<strong>Step 2</strong> - Financial Information
													</h3>

												</div>
												
												
												<!--  TESTING ON THYMELEAF STRUCTURING BEGINS HERE -->

												<div class="tab-pane" id="tab3">
													<br>
													<h3>
														<strong>Step 3</strong> - Mineral Details
													</h3>

													<fieldset>
														<legend>Click on the mineral to add details</legend>
														
														<div>
													        <label for="planName">Field 1</label>
													        <input type="text" id="planName" name="planName" th:field="${gizmo.planName}"/>
													    </div>
													    <div>
													        <label for="capCost">Field 2</label>
													        <input type="text" id="capCost" name="capCost" th:field="${gizmo.capCost}"/>
													    </div>
													    <div>
													        <ul>
													            <li th:each="item, stat : *{buildPlanMetals}" class="itemRow">
													                <div>
													                    <label th:for="${'grade-'+stat.index}">Field 1</label>
													                    <input type="text" class="form-control quantity" name="grade"
													                           th:field="*{buildPlanMetals[__${stat.index}__].grade}" th:id="${'grade-'+stat.index}"/>
													 
													                    <label th:for="${'payable-'+stat.index}">Field 2</label>
													                    <input type="text" class="form-control quantity" name="payable"
													                           th:field="*{buildPlanMetals[__${stat.index}__].payable}" th:id="${'payable-'+stat.index}"/>
													                </div>
													            </li>
													        </ul>
													    </div>
													    <div>
														
														<!-- 
														
														<div>
													       <label for="field1">Field 1</label>
													       <input type="text" id="buildPlanName" name="Build Plan Name" th:field="${buildPlan.planName}"/>
													   </div>
													   <div>
													       <label for="field2">Field 2</label>
													       <input type="text" id="capCost" name="Capital Cost" th:field="${buildPlan.capCost}"/>
													   </div>
													   <div>
													       <ul>
													           <li th:each="buildPlanMetal, loop : *{buildPlanMetals}" class="itemRow">
													               
													               <!-
													               
													               <div>
													                   <label >Metal 1</label> <!-- th:for="${'buildPlanMetal-'+loop.index}" --> <!-- 
													                   <input type="text" class="form-control quantity" th:id="|buildPlanMetals[${loop.index}].grade|" name="|buildPlanMetals[${loop.index}].grade|" th:field="*{buildPlanMetals[__${loop.index}__].grade}" />
													 
													                   <label >Field 2</label> <!--  th:for="${'childField2-'+loop.index}" --> <!-- 
													                   <input type="text" class="form-control quantity" th:id="|buildPlanMetals[${loop.index}].payable|" name="|buildPlanMetals[${loop.index}].payable|" th:field="*{buildPlanMetals[__${loop.index}__].payable}" />
													               </div>
													           </li>
													       </ul>
													   </div>
													   
													    -->
														
														<!--  
														<div>
													       <label for="field1">Field 1</label>
													       <input type="text" id="field1" name="field1" th:field="${gizmo.field1}"/>
													   </div>
													   <div>
													       <label for="field2">Field 2</label>
													       <input type="text" id="field2" name="field2" th:field="${gizmo.field2}"/>
													   </div>
													   <div>
													       <ul>
													           <li th:each="item, stat : *{children}" class="itemRow">
													               <div>
													                   <label th:for="${'childField1-'+stat.index}">Field 1</label>
													                   <input type="text" class="form-control quantity" name="childField1"
													                          th:field="*{children[__${stat.index}__].childField1}" th:id="${'childField1-'+stat.index}"/>
													 
													                   <label th:for="${'childField2-'+stat.index}">Field 2</label>
													                   <input type="text" class="form-control quantity" name="childField2"
													                          th:field="*{children[__${stat.index}__].childField2}" th:id="${'childField2-'+stat.index}"/>
													               </div>
													           </li>
													       </ul>
													   </div>
														
														-->
														
														<!--  
														

														<div class="panel-group smart-accordion-default"
															id="accordion">

															<div th:each="projectMetal, iterStat : ${projectMetals}"
																class="panel panel-default">
																<div class="panel-heading">
																	<h4 class="panel-title">
																		<a data-toggle="collapse" data-parent="#accordion"
																			href="#collapseOne" aria-expanded="false"
																			class="collapsed"
																			th:text="${{projectMetal.metal.name}}"> <i
																			class="fa fa-lg fa-angle-down pull-right"></i> <i
																			class="fa fa-lg fa-angle-up pull-right"></i> Metal
																		</a>
																	</h4>
																</div>
																<div id="collapseOne" class="panel-collapse collapse"
																	aria-expanded="false" style="height: 0px;">
																	<div class="panel-body">


																		<div class="row">
																			<div class="col-sm-12">
																				<div class="form-group">
																					<div class="input-group">
																						<span class="input-group-addon"> <i
																							class="fa fa-sort-amount-desc fa-lg fa-fw"></i>
																						</span> <input class="form-control input-lg"
																							placeholder="Concentrate Grade" type="text"
																							name="concentrateGrade" id="concentrateGrade"
																							th:field="*{concentrateGrade[__${iterStat.index}__]}" />
																					</div>
																				</div>

																				<div class="form-group">
																					<div class="input-group">
																						<span class="input-group-addon"> <i
																							class="fa fa-ship fa-lg fa-fw"></i>
																						</span> <input class="form-control input-lg"
																							placeholder="Concentrate Transport Cost"
																							type="text" name="concentrateTransportCost"
																							id="concentrateTransportCost"
																							th:field="*{concentrateTransportCost[__${iterStat.index}__]}" />
																					</div>
																				</div>

																				<div class="form-group">
																					<div class="input-group">
																						<span class="input-group-addon"> <i
																							class="fa fa-percent fa-lg fa-fw"></i>
																						</span> <input class="form-control input-lg"
																							placeholder="Grade" type="text" name="grade"
																							id="grade"
																							th:field="*{grade[__${iterStat.index}__]}" />
																					</div>
																				</div>

																				<div class="form-group">
																					<div class="input-group">
																						<span class="input-group-addon"> <i
																							class="fa fa-balance-scale fa-lg fa-fw"></i>
																						</span> <input class="form-control input-lg"
																							placeholder="Concentrate Tonnage" type="text"
																							name="concentrateTonnage" id="concentrateTonnage"
																							th:field="*{metalConcentrateTonnage[__${iterStat.index}__]}" />
																					</div>
																				</div>

																				<div class="form-group">
																					<div class="input-group">
																						<span class="input-group-addon"> <i
																							class="fa fa-user fa-lg fa-fw"></i>
																						</span> <input class="form-control input-lg"
																							placeholder="Price" type="text" name="price"
																							id="price"
																							th:field="*{price[__${iterStat.index}__]}" />
																					</div>
																				</div>

																				<div class="form-group">
																					<div class="input-group">
																						<span class="input-group-addon"> <i
																							class="fa fa-user fa-lg fa-fw"></i>
																						</span> <input class="form-control input-lg"
																							placeholder="Recovery" type="text"
																							name="recovery" id="recovery"
																							th:field="*{recovery[__${iterStat.index}__]}" />
																					</div>
																				</div>

																			</div>
																		</div>
																	</div>
																</div>
															</div>




														</div>
													 -->
													</fieldset>


												</div>

												<div class="tab-pane" id="tab4">
													<br>
													<h3>
														<strong>Step 4</strong> - Risk Details
													</h3>
													<fieldset>
													</fieldset>
												</div>

												<div class="form-actions">
													<div class="row">
														<div class="col-sm-12">
															<ul class="pager wizard no-margin">
																<li class="previous first"><a
																	href="javascript:void(0);"
																	class="btn btn-lg btn-default">First</a></li>
																<li class="previous"><a href="javascript:void(0);"
																	class="btn btn-lg btn-default"> Previous </a></li>
																<li class="next finish"><input type="submit"
																	class="btn btn-lg btn-default" value="Submit"></li>
																<li class="next last"><a href="javascript:void(0);"
																	class="btn btn-lg btn-default"> Last </a></li>
																<li class="next"><a href="javascript:void(0);"
																	class="btn btn-lg btn-default"> Next </a></li>
															</ul>
														</div>
													</div>
												</div>

											</div>
										</div>
									</form>
								</div>

							</div>
							<!-- end widget content -->

						</div>
						<!-- end widget div -->
					</div>
					<!-- end widget -->

				</article>
				<!-- WIDGET END -->
			</div>
			<!-- end row -->

		</section>
		<!-- end widget grid -->

	</div>


	<!-- Link to Google CDN's jQuery + jQueryUI; fall back to local -->
	<!-- These scripts should also be provided by the template, if they are specific to this page they should be included below -->
	<script
		src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
	<script>
		if (!window.jQuery) {
			document
					.write('<script src="../../../js/libs/jquery-2.1.1.min.js" th:src="@{/js/libs/jquery-2.1.1.min.js}"><\/script>');
		}
	</script>

	<script
		src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
	<script>
		if (!window.jQuery.ui) {
			document
					.write('<script src="../../../js/libs/jquery-ui-1.10.3.min.js" th:src="@{/js/libs/jquery-ui-1.10.3.min.js}"><\/script>');
		}
	</script>

	<!-- PACE LOADER - turn this on if you want ajax loading to show (caution: uses lots of memory on iDevices)-->
	<script data-pace-options='{ "restartOnRequestAfter": true }'
		src="../../../js/plugin/pace/pace.min.js"
		th:src="@{/js/plugin/pace/pace.min.js}"></script>

	<!-- IMPORTANT: APP CONFIG -->
	<script src="../../../js/app.config.js" th:src="@{/js/app.config.js}"></script>

	<!-- BOOTSTRAP JS -->
	<script src="../../../js/bootstrap/bootstrap.min.js"
		th:src="@{/js/bootstrap/bootstrap.min.js}"></script>

	<!-- SPARKLINES -->
	<script src="../../../js/plugin/sparkline/jquery.sparkline.min.js"
		th:src="@{/js/plugin/sparkline/jquery.sparkline.min.js}"></script>

	<!-- MAIN APP JS FILE -->
	<script src="../../../js/app.min.js" th:src="@{/js/app.min.js}"></script>

	<!-- JARVIS WIDGETS -->
	<script src="../../../js/smartwidgets/jarvis.widget.min.js"
		th:src="@{/js/smartwidgets/jarvis.widget.min.js}"></script>


	<div layout:fragment="script-post-content">

		<!-- PAGE RELATED PLUGIN(S) -->

		<!-- JQUERY VALIDATE -->
		<script
			src="../../../js/plugin/jquery-validate/jquery.validate.min.js"
			th:src="@{/js/plugin/jquery-validate/jquery.validate.min.js}"></script>

		<!-- JQUERY SELECT2 INPUT -->
		<script src="../../../js/plugin/select2/select2.min.js"
			th:src="@{/js/plugin/select2/select2.min.js}"></script>

		<!-- BOOTSTRAP WIZARD -->
		<script
			src="../../../js/plugin/bootstrap-wizard/jquery.bootstrap.wizard.min.js"
			th:src="@{/js/plugin/bootstrap-wizard/jquery.bootstrap.wizard.min.js}"></script>

		<!-- NOUI SLIDER -->
		<script src="../../../js/plugin/noUiSlider/jquery.nouislider.min.js"
			th:src="@{/js/plugin/noUiSlider/jquery.nouislider.min.js}"></script>


		<script type="text/javascript">
			// DO NOT REMOVE : GLOBAL FUNCTIONS!

			var sliderMinelife = document.getElementById('life-slider'),
			stripRateSlider = document.getElementById('stripRate-slider'),
			sliderCostlife = document.getElementById('cost-slider'),
			miningRateSlider = document.getElementById('miningRate-slider')

			$(document)
					.ready(
							function() {

								pageSetUp();

								//Bootstrap Wizard Validations

								var $validator = $("#wizard-1")
										.validate(
												{

													rules : {
														email : {
															required : true,
															email : "Your email address must be in the format of name@domain.com"
														},
														fname : {
															required : true
														},
														lname : {
															required : true
														},
														country : {
															required : true
														},
														city : {
															required : true
														},
														postal : {
															required : true,
															minlength : 4
														},
														wphone : {
															required : true,
															minlength : 10
														},
														hphone : {
															required : true,
															minlength : 10
														}
													},

													messages : {
														fname : "Please specify your First name",
														lname : "Please specify your Last name",
														email : {
															required : "We need your email address to contact you",
															email : "Your email address must be in the format of name@domain.com"
														}
													},

													highlight : function(
															element) {
														$(element)
																.closest(
																		'.form-group')
																.removeClass(
																		'has-success')
																.addClass(
																		'has-error');
													},
													unhighlight : function(
															element) {
														$(element)
																.closest(
																		'.form-group')
																.removeClass(
																		'has-error')
																.addClass(
																		'has-success');
													},
													errorElement : 'span',
													errorClass : 'help-block',
													errorPlacement : function(
															error, element) {
														if (element
																.parent('.input-group').length) {
															error
																	.insertAfter(element
																			.parent());
														} else {
															error
																	.insertAfter(element);
														}
													}
												});

								$('#bootstrap-wizard-1')
										.bootstrapWizard(
												{
													'tabClass' : 'form-wizard',
													'onNext' : function(tab,
															navigation, index) {
														var $valid = $(
																"#wizard-1")
																.valid();
														if (!$valid) {
															$validator
																	.focusInvalid();
															return false;
														} else {
															$(
																	'#bootstrap-wizard-1')
																	.find(
																			'.form-wizard')
																	.children(
																			'li')
																	.eq(
																			index - 1)
																	.addClass(
																			'complete');
															$(
																	'#bootstrap-wizard-1')
																	.find(
																			'.form-wizard')
																	.children(
																			'li')
																	.eq(
																			index - 1)
																	.find(
																			'.step')
																	.html(
																			'<i class="fa fa-check"></i>');
														}
													}
												});

								// - Next, previous, last, finish buttons

								$(document)
										.ready(
												function() {
													$('#bootstrap-wizard-1')
															.bootstrapWizard(
																	{
																		onTabShow : function(
																				tab,
																				navigation,
																				index) {
																			var $total = navigation
																					.find('li').length;
																			var $current = index + 1;
																			var $percent = ($current / $total) * 100;
																			$(
																					'#bootstrap-wizard-1')
																					.find(
																							'.bar')
																					.css(
																							{
																								width : $percent
																										+ '%'
																							});

																			// If it's the last tab then hide the last button and show the finish instead
																			if ($current >= $total) {
																				$(
																						'#bootstrap-wizard-1')
																						.find(
																								'.pager .next')
																						.hide();
																				$(
																						'#bootstrap-wizard-1')
																						.find(
																								'.pager .finish')
																						.show();
																				$(
																						'#bootstrap-wizard-1')
																						.find(
																								'.pager .finish')
																						.removeClass(
																								'disabled');
																			} else {
																				$(
																						'#bootstrap-wizard-1')
																						.find(
																								'.pager .next')
																						.show();
																				$(
																						'#bootstrap-wizard-1')
																						.find(
																								'.pager .finish')
																						.hide();
																			}

																		}
																	});
													$(
															'#bootstrap-wizard-1 .finish')
															.click(
																	function() {
																		alert('Build plan submitted');
																		//$('#bootstrap-wizard-1').find("a[href*='tab3']").trigger('click');
																	});
												});

								/*
								 * JS SLIDER
								 */
								
								//----------------------------------MINE LIFE SLIDER---------------------------------\\
								inputMineLife = document.getElementById('mine-life-hidden'); // the id of the text field
								
								noUiSlider.create(sliderMinelife, {
									range : {
										'min' : 0.5,
										'max' : 35
									},
									start : 15,
									step : 0.5,
								});

								sliderMinelife.noUiSlider.on('update',
										function(values, handle) {
											$(".life-slider-value").text(values[0]);
											inputMineLife.value = values[handle];
										});

								sliderMinelife.noUiSlider.on('slide', function(
										values) {
									//var values = $(this).val();
									$(".life-slider-value").text(values[0]);
								});
								
								inputMineLife.addEventListener('change', function() {
									sliderMinelife.noUiSlider.set([ null,	this.value ]);
								});
								
								inputMineLife
								.addEventListener(
										'keydown',
										function(e) {

											// Convert the string to a number.
											var value = Number(sliderMinelife.noUiSlider.get()), 
												sliderStep = sliderMinelife.noUiSlider.steps()

											// Select the stepping for the first handle.
											sliderStep = sliderStep[0];

											// 13 is enter,
											// 38 is key up,
											// 40 is key down.
											switch (e.which) {
											case 13:
												sliderMinelife.noUiSlider.set(this.value);
												break;
											case 38:
												sliderMinelife.noUiSlider.set(value + sliderStep[1]);
												break;
											case 40:
												sliderMinelife.noUiSlider.set(value - sliderStep[0]);
												break;
											}
										});
								
								//----------------------------------COST LIFE SLIDER---------------------------------\\
								inputCostLife = document.getElementById('cost-life-hidden') // the id of the text field
								
								noUiSlider.create(sliderCostlife, {
									start : 5,
									step : 1,
									range : {
										'min' : 1,
										'max' : 100
									}
								});

								sliderCostlife.noUiSlider.on('update',
										function(values, handle) {
											$(".cost-slider-value").text(values[0]);
											inputCostLife.value = values[handle];
										});

								sliderCostlife.noUiSlider.on('slide', function(
										values) {
									//var values = $(this).val();
									$(".cost-slider-value").text(values[0]);
								});
								
								inputCostLife.addEventListener('change', function() {
									sliderCostlife.noUiSlider.set([ null,	this.value ]);
								});
								
								inputCostLife
								.addEventListener(
										'keydown',
										function(e) {

											// Convert the string to a number.
											var value = Number(sliderCostlife.noUiSlider.get()), 
												sliderStep = sliderCostlife.noUiSlider.steps()

											// Select the stepping for the first handle.
											sliderStep = sliderStep[0];

											// 13 is enter,
											// 38 is key up,
											// 40 is key down.
											switch (e.which) {
											case 13:
												sliderCostlife.noUiSlider.set(this.value);
												break;
											case 38:
												sliderCostlife.noUiSlider.set(value + sliderStep[1]);
												break;
											case 40:
												sliderCostlife.noUiSlider.set(value - sliderStep[0]);
												break;
											}
										});
								
								//----------------------------------STRIP RATE SLIDER---------------------------------\\
								inputStripRate = document.getElementById('strip-rate-hidden'); // the id of the text field
								noUiSlider.create(stripRateSlider, {
									start : 100,
									step : 10,
									range : {
										'min' : 1,
										'max' : 500
									}
								});

								stripRateSlider.noUiSlider.on('update',
										function(values, handle) {
											$(".stripRate-slider-value").text(values[0]);
											inputStripRate.value = values[handle];
										});
								
								stripRateSlider.noUiSlider.on('slide',
										function(values) {
											//var values = $(this).val();
											$(".stripRate-slider-value").text(values[0]);
										});

								inputStripRate.addEventListener('change', function() {
									stripRateSlider.noUiSlider.set([ null,	this.value ]);
								});

								inputStripRate
										.addEventListener(
												'keydown',
												function(e) {

													// Convert the string to a number.
													var value = Number(stripRateSlider.noUiSlider.get()), 
															sliderStep = stripRateSlider.noUiSlider.steps()

													// Select the stepping for the first handle.
													sliderStep = sliderStep[0];

													// 13 is enter,
													// 38 is key up,
													// 40 is key down.
													switch (e.which) {
													case 13:
														stripRateSlider.noUiSlider.set(this.value);
														break;
													case 38:
														stripRateSlider.noUiSlider.set(value + sliderStep[1]);
														break;
													case 40:
														stripRateSlider.noUiSlider.set(value - sliderStep[0]);
														break;
													}
												});
								
								//----------------------------------MINING RATE SLIDER---------------------------------\\
								inputMiningRate = document.getElementById('mining-rate-hidden'); // the id of the text field
								
								noUiSlider.create(miningRateSlider, {
									range : {
										'min' : 1,
										'max' : 100
									},
									start : 5,
									step : 1,
								});

								miningRateSlider.noUiSlider.on('update',
										
										function(values, handle) {
											$(".miningRate-slider-value").text(values[0]);
											inputMiningRate.value = values[handle];
										});

								miningRateSlider.noUiSlider.on('slide',
										function(values) {
											//var values = $(this).val();
											$(".miningRate-slider-value").text(values[0]);
										});
								
								inputMiningRate.addEventListener('change', function() {
									miningRateSlider.noUiSlider.set([ null,	this.value ]);
								});
								
								inputMiningRate
								.addEventListener(
										'keydown',
										function(e) {

											// Convert the string to a number.
											var value = Number(miningRateSlider.noUiSlider.get()), 
													sliderStep = miningRateSlider.noUiSlider.steps()

											// Select the stepping for the first handle.
											sliderStep = sliderStep[0];

											// 13 is enter,
											// 38 is key up,
											// 40 is key down.
											switch (e.which) {
											case 13:
												miningRateSlider.noUiSlider.set(this.value);
												break;
											case 38:
												miningRateSlider.noUiSlider.set(value + sliderStep[1]);
												break;
											case 40:
												miningRateSlider.noUiSlider.set(value - sliderStep[0]);
												break;
											}
										});
							})
		</script>



	</div>


</body>
</html>